jobs:  
  - job: deploy 
    displayName: Deploy Nuget
    pool:
        name: 'Doitsu Technology Linux Pipeplies'
        vmImage: 'Doitsu.Technology.Ubuntu.Agent'
    variables:
        buildConfiguration: 'Release'
    steps:
    - task: DotNetCoreCLI@2
      displayName: "Packing Doitsu.Ecommerce.ApplicationCore Process"
      inputs:
          command: 'pack'
          arguments: '--configuration $(buildConfiguration)'
          packagesToPack: 'src/Doitsu.Ecommerce.ApplicationCore/Doitsu.Ecommerce.ApplicationCore.csproj'
          nobuild: true
          versioningScheme: 'off'
    - task: DotNetCoreCLI@2
      displayName: "Packing Doitsu.Ecommerce.Infrastructure Process"
      inputs:
          command: 'pack'
          arguments: '--configuration $(buildConfiguration)'
          packagesToPack: 'src/Doitsu.Ecommerce.Infrastructure/Doitsu.Ecommerce.Infrastructure.csproj'
          nobuild: true
          versioningScheme: 'off'
    - task: NuGetCommand@2
      inputs:
          command: 'push'
          feedsToUse: 'select'
          packagesToPush: '$(Build.ArtifactStagingDirectory)/**/*.nupkg;!$(Build.ArtifactStagingDirectory)/**/*.symbols.nupkg'
          nuGetFeedType: 'internal'
          publishVstsFeed: 'Doitsu.Technology'
          versioningScheme: 'off'
          allowPackageConflicts: true